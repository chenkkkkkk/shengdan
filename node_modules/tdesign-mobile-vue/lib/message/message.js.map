{"version":3,"file":"message.js","sources":["../../src/message/message.vue","../../src/message/message.vue?vue&type=template&id=eade9a48&lang.js"],"sourcesContent":["<template>\n  <transition name=\"message\" @after-leave=\"afterLeave\" @after-enter=\"afterEnter\">\n    <div v-if=\"currentVisible\" ref=\"root\" :class=\"rootClasses\" :style=\"rootStyles\">\n      <t-node v-if=\"computedPrefixIcon\" :content=\"computedPrefixIcon\"></t-node>\n      <div ref=\"textWrapDOM\" :class=\"textWrapClasses\">\n        <div\n          ref=\"textDOM\"\n          :class=\"`${name}__text`\"\n          :style=\"scroll.marquee ? animateStyle : ''\"\n          @transitionend=\"handleTransitionend()\"\n        >\n          <t-node v-if=\"computedContent\" :content=\"computedContent\"></t-node>\n        </div>\n      </div>\n      <div v-if=\"computedCloseBtn\" @click=\"onClose\">\n        <t-node :content=\"computedCloseBtn\"></t-node>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport {\n  h,\n  ref,\n  computed,\n  watch,\n  defineComponent,\n  getCurrentInstance,\n  SetupContext,\n  toRefs,\n  reactive,\n  nextTick,\n  onMounted,\n} from 'vue';\nimport { CheckCircleFilledIcon, ErrorCircleFilledIcon, CloseIcon } from 'tdesign-icons-vue-next';\nimport { isFunction } from 'lodash';\nimport { off } from 'process';\nimport messageProps from './props';\nimport { DrawMarquee } from './type';\nimport config from '../config';\nimport { renderContent, renderTNode, TNode, useEmitEvent, useVModel } from '../shared';\n\nconst { prefix } = config;\nconst name = `${prefix}-message`;\nconst iconDefault = {\n  info: h(ErrorCircleFilledIcon),\n  success: h(CheckCircleFilledIcon),\n  warning: h(ErrorCircleFilledIcon),\n  error: h(ErrorCircleFilledIcon),\n};\n\nexport default defineComponent({\n  name,\n  components: { TNode },\n  props: messageProps,\n  emits: ['change', 'open', 'opened', 'close', 'closed'],\n  setup(props: any, context: SetupContext) {\n    const emitEvent = useEmitEvent(props, context.emit);\n    const internalInstance = getCurrentInstance();\n\n    // 初始化动画相关数据\n    const state = reactive({\n      duration: 0,\n      offset: 0,\n      listWidth: 0,\n      itemWidth: 0,\n      scroll: {\n        marquee: false,\n        speed: 50,\n        loop: -1, // 值为 -1 表示循环播放，值为 0 表示不循环播放\n        delay: 0,\n      },\n    });\n\n    const { visible, modelValue } = toRefs(props);\n    const [currentVisible, setVisible] = useVModel(visible, modelValue, props.defaultVisible, props.onChange);\n    const rootClasses = computed(() => ({\n      [name]: true,\n      [`${name}--${props.theme}`]: true,\n      [`${name}-align--${props.align}`]: !!props.align,\n    }));\n\n    const textWrapClasses = computed(() => ({\n      [`${name}__text-wrap`]: true,\n      [`${name}__text-nowrap`]: props.marquee,\n    }));\n\n    const changeNumToStr = (arr: []) => {\n      return arr.map(function (item) {\n        return typeof item === 'number' ? `${item}px` : item;\n      });\n    };\n\n    const getMessageStylesOffset = (offset: []) => {\n      const arr = changeNumToStr(offset);\n      return {\n        top: arr[0],\n        right: arr[1],\n        left: arr[1],\n      };\n    };\n\n    const rootStyles = computed(() => {\n      const { offset } = props;\n      const offsetStyle = offset ? getMessageStylesOffset(offset) : [];\n      return {\n        zIndex: props.zIndex,\n        ...offsetStyle,\n      };\n    });\n\n    const computedPrefixIcon = computed(() => {\n      const { icon } = props;\n      if (!icon) return null;\n      if (icon && !context.slots.icon && !isFunction(icon)) {\n        const theme = props.theme as string;\n        return iconDefault?.[theme] || null;\n      }\n      return renderTNode(internalInstance, 'icon');\n    });\n\n    // content\n    const computedContent = computed(() => renderContent(internalInstance, 'default', 'content'));\n\n    // closeBtn\n    const computedCloseBtn = computed(() => {\n      const { closeBtn } = props;\n      if (isFunction(closeBtn || context.slots.closeBtn)) {\n        return renderTNode(internalInstance, 'closeBtn');\n      }\n      if (closeBtn) {\n        const closeIcon = h(CloseIcon);\n        return closeIcon;\n      }\n      return null;\n    });\n\n    // 动画\n    const animateStyle = computed(() => ({\n      transform: state.offset ? `translateX(${state.offset}px)` : '',\n      transitionDuration: `${state.duration}s`,\n      transitionTimingFunction: 'linear',\n    }));\n\n    const textWrapDOM = ref();\n    const textDOM = ref();\n\n    const handleScrolling = () => {\n      if (!props?.marquee || (props?.marquee as DrawMarquee)?.loop === 0) {\n        return;\n      }\n      // 初始化动画参数\n      if (typeof props.marquee === 'boolean') {\n        state.scroll = { ...state.scroll, marquee: props.marquee };\n      }\n      const marquee = props.marquee as DrawMarquee;\n      state.scroll = {\n        marquee: true,\n        loop: typeof marquee?.loop === 'undefined' ? state.scroll.loop : marquee.loop,\n        speed: marquee.speed ?? state.scroll.speed,\n        delay: marquee.delay ?? state.scroll.delay,\n      };\n      // 设置动画\n      setTimeout(() => {\n        const textWrapDOMWidth = textWrapDOM.value?.getBoundingClientRect().width;\n        const textDOMWidth = textDOM.value?.getBoundingClientRect().width;\n        state.offset = -textDOMWidth;\n        state.duration = textDOMWidth / state.scroll.speed;\n        state.listWidth = textWrapDOMWidth;\n        state.itemWidth = textDOMWidth;\n      }, state.scroll.delay);\n    };\n\n    // 动画结束后，初始化动画\n    const handleTransitionend = () => {\n      state.scroll.loop = --state.scroll.loop;\n      if (state.scroll.loop === 0) {\n        state.scroll = {\n          ...state.scroll,\n          marquee: false,\n        };\n        return;\n      }\n      state.offset = state.listWidth;\n      state.duration = 0;\n\n      setTimeout(() => {\n        state.offset = -state.itemWidth;\n        state.duration = (state.itemWidth + state.listWidth) / state.scroll.speed;\n      }, 0);\n    };\n\n    const onClose = () => {\n      emitEvent('close');\n      setVisible(false);\n    };\n\n    const handleDuration = () => {\n      if (props.duration > 0) {\n        setTimeout(() => {\n          emitEvent('durationEnd');\n          onClose();\n        }, props.duration);\n      }\n    };\n\n    onMounted(() => {\n      nextTick(() => {\n        if (currentVisible.value) {\n          handleScrolling();\n        }\n      });\n    });\n\n    watch(\n      () => currentVisible.value,\n      (val) => {\n        if (val === false) return;\n        emitEvent('open');\n        setVisible(true);\n        handleDuration();\n        nextTick(() => {\n          state.offset = state.listWidth;\n          state.duration = 0;\n          handleScrolling();\n        });\n      },\n    );\n\n    return {\n      name: ref(name),\n      ...toRefs(state),\n      currentVisible,\n      rootClasses,\n      textWrapClasses,\n      rootStyles,\n      computedPrefixIcon,\n      computedContent,\n      computedCloseBtn,\n      textWrapDOM,\n      textDOM,\n      animateStyle,\n      onClose,\n      handleTransitionend,\n      afterEnter: () => emitEvent('opened'),\n      afterLeave: () => emitEvent('closed'),\n    };\n  },\n});\n</script>\n","<template>\n  <transition name=\"message\" @after-leave=\"afterLeave\" @after-enter=\"afterEnter\">\n    <div v-if=\"currentVisible\" ref=\"root\" :class=\"rootClasses\" :style=\"rootStyles\">\n      <t-node v-if=\"computedPrefixIcon\" :content=\"computedPrefixIcon\"></t-node>\n      <div ref=\"textWrapDOM\" :class=\"textWrapClasses\">\n        <div\n          ref=\"textDOM\"\n          :class=\"`${name}__text`\"\n          :style=\"scroll.marquee ? animateStyle : ''\"\n          @transitionend=\"handleTransitionend()\"\n        >\n          <t-node v-if=\"computedContent\" :content=\"computedContent\"></t-node>\n        </div>\n      </div>\n      <div v-if=\"computedCloseBtn\" @click=\"onClose\">\n        <t-node :content=\"computedCloseBtn\"></t-node>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport {\n  h,\n  ref,\n  computed,\n  watch,\n  defineComponent,\n  getCurrentInstance,\n  SetupContext,\n  toRefs,\n  reactive,\n  nextTick,\n  onMounted,\n} from 'vue';\nimport { CheckCircleFilledIcon, ErrorCircleFilledIcon, CloseIcon } from 'tdesign-icons-vue-next';\nimport { isFunction } from 'lodash';\nimport { off } from 'process';\nimport messageProps from './props';\nimport { DrawMarquee } from './type';\nimport config from '../config';\nimport { renderContent, renderTNode, TNode, useEmitEvent, useVModel } from '../shared';\n\nconst { prefix } = config;\nconst name = `${prefix}-message`;\nconst iconDefault = {\n  info: h(ErrorCircleFilledIcon),\n  success: h(CheckCircleFilledIcon),\n  warning: h(ErrorCircleFilledIcon),\n  error: h(ErrorCircleFilledIcon),\n};\n\nexport default defineComponent({\n  name,\n  components: { TNode },\n  props: messageProps,\n  emits: ['change', 'open', 'opened', 'close', 'closed'],\n  setup(props: any, context: SetupContext) {\n    const emitEvent = useEmitEvent(props, context.emit);\n    const internalInstance = getCurrentInstance();\n\n    // 初始化动画相关数据\n    const state = reactive({\n      duration: 0,\n      offset: 0,\n      listWidth: 0,\n      itemWidth: 0,\n      scroll: {\n        marquee: false,\n        speed: 50,\n        loop: -1, // 值为 -1 表示循环播放，值为 0 表示不循环播放\n        delay: 0,\n      },\n    });\n\n    const { visible, modelValue } = toRefs(props);\n    const [currentVisible, setVisible] = useVModel(visible, modelValue, props.defaultVisible, props.onChange);\n    const rootClasses = computed(() => ({\n      [name]: true,\n      [`${name}--${props.theme}`]: true,\n      [`${name}-align--${props.align}`]: !!props.align,\n    }));\n\n    const textWrapClasses = computed(() => ({\n      [`${name}__text-wrap`]: true,\n      [`${name}__text-nowrap`]: props.marquee,\n    }));\n\n    const changeNumToStr = (arr: []) => {\n      return arr.map(function (item) {\n        return typeof item === 'number' ? `${item}px` : item;\n      });\n    };\n\n    const getMessageStylesOffset = (offset: []) => {\n      const arr = changeNumToStr(offset);\n      return {\n        top: arr[0],\n        right: arr[1],\n        left: arr[1],\n      };\n    };\n\n    const rootStyles = computed(() => {\n      const { offset } = props;\n      const offsetStyle = offset ? getMessageStylesOffset(offset) : [];\n      return {\n        zIndex: props.zIndex,\n        ...offsetStyle,\n      };\n    });\n\n    const computedPrefixIcon = computed(() => {\n      const { icon } = props;\n      if (!icon) return null;\n      if (icon && !context.slots.icon && !isFunction(icon)) {\n        const theme = props.theme as string;\n        return iconDefault?.[theme] || null;\n      }\n      return renderTNode(internalInstance, 'icon');\n    });\n\n    // content\n    const computedContent = computed(() => renderContent(internalInstance, 'default', 'content'));\n\n    // closeBtn\n    const computedCloseBtn = computed(() => {\n      const { closeBtn } = props;\n      if (isFunction(closeBtn || context.slots.closeBtn)) {\n        return renderTNode(internalInstance, 'closeBtn');\n      }\n      if (closeBtn) {\n        const closeIcon = h(CloseIcon);\n        return closeIcon;\n      }\n      return null;\n    });\n\n    // 动画\n    const animateStyle = computed(() => ({\n      transform: state.offset ? `translateX(${state.offset}px)` : '',\n      transitionDuration: `${state.duration}s`,\n      transitionTimingFunction: 'linear',\n    }));\n\n    const textWrapDOM = ref();\n    const textDOM = ref();\n\n    const handleScrolling = () => {\n      if (!props?.marquee || (props?.marquee as DrawMarquee)?.loop === 0) {\n        return;\n      }\n      // 初始化动画参数\n      if (typeof props.marquee === 'boolean') {\n        state.scroll = { ...state.scroll, marquee: props.marquee };\n      }\n      const marquee = props.marquee as DrawMarquee;\n      state.scroll = {\n        marquee: true,\n        loop: typeof marquee?.loop === 'undefined' ? state.scroll.loop : marquee.loop,\n        speed: marquee.speed ?? state.scroll.speed,\n        delay: marquee.delay ?? state.scroll.delay,\n      };\n      // 设置动画\n      setTimeout(() => {\n        const textWrapDOMWidth = textWrapDOM.value?.getBoundingClientRect().width;\n        const textDOMWidth = textDOM.value?.getBoundingClientRect().width;\n        state.offset = -textDOMWidth;\n        state.duration = textDOMWidth / state.scroll.speed;\n        state.listWidth = textWrapDOMWidth;\n        state.itemWidth = textDOMWidth;\n      }, state.scroll.delay);\n    };\n\n    // 动画结束后，初始化动画\n    const handleTransitionend = () => {\n      state.scroll.loop = --state.scroll.loop;\n      if (state.scroll.loop === 0) {\n        state.scroll = {\n          ...state.scroll,\n          marquee: false,\n        };\n        return;\n      }\n      state.offset = state.listWidth;\n      state.duration = 0;\n\n      setTimeout(() => {\n        state.offset = -state.itemWidth;\n        state.duration = (state.itemWidth + state.listWidth) / state.scroll.speed;\n      }, 0);\n    };\n\n    const onClose = () => {\n      emitEvent('close');\n      setVisible(false);\n    };\n\n    const handleDuration = () => {\n      if (props.duration > 0) {\n        setTimeout(() => {\n          emitEvent('durationEnd');\n          onClose();\n        }, props.duration);\n      }\n    };\n\n    onMounted(() => {\n      nextTick(() => {\n        if (currentVisible.value) {\n          handleScrolling();\n        }\n      });\n    });\n\n    watch(\n      () => currentVisible.value,\n      (val) => {\n        if (val === false) return;\n        emitEvent('open');\n        setVisible(true);\n        handleDuration();\n        nextTick(() => {\n          state.offset = state.listWidth;\n          state.duration = 0;\n          handleScrolling();\n        });\n      },\n    );\n\n    return {\n      name: ref(name),\n      ...toRefs(state),\n      currentVisible,\n      rootClasses,\n      textWrapClasses,\n      rootStyles,\n      computedPrefixIcon,\n      computedContent,\n      computedCloseBtn,\n      textWrapDOM,\n      textDOM,\n      animateStyle,\n      onClose,\n      handleTransitionend,\n      afterEnter: () => emitEvent('opened'),\n      afterLeave: () => emitEvent('closed'),\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","iconDefault","info","h","ErrorCircleFilledIcon","success","CheckCircleFilledIcon","warning","error","defineComponent","components","TNode","props","messageProps","emits","setup","context","emitEvent","useEmitEvent","emit","internalInstance","getCurrentInstance","state","reactive","duration","offset","listWidth","itemWidth","scroll","marquee","speed","loop","delay","toRefs","visible","modelValue","useVModel","defaultVisible","onChange","_slicedToArray","currentVisible","setVisible","rootClasses","computed","_defineProperty","theme","align","textWrapClasses","changeNumToStr","arr","map","item","getMessageStylesOffset","top","right","left","rootStyles","offsetStyle","zIndex","computedPrefixIcon","icon","slots","isFunction","renderTNode","computedContent","renderContent","computedCloseBtn","closeBtn","closeIcon","CloseIcon","animateStyle","transform","transitionDuration","transitionTimingFunction","textWrapDOM","ref","textDOM","handleScrolling","setTimeout","textWrapDOMWidth","value","getBoundingClientRect","width","textDOMWidth","handleTransitionend","onClose","handleDuration","onMounted","nextTick","watch","val","afterEnter","afterLeave","_createBlock","_Transition","onAfterLeave","_ctx","onAfterEnter","_createElementBlock","class","style","_component_t_node","content","_createElementVNode","_normalizeStyle","onTransitionend","onClick","_createVNode"],"mappings":"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"}