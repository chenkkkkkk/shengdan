{"version":3,"file":"index.js","sources":["../../../src/shared/useTest/index.ts"],"sourcesContent":["import { sleep } from '../util';\n\n/**\n * 测试相关的工具方法\n */\nexport function useTestUtils() {\n  const makeScroll = async (dom: Element, name: 'scrollTop' | 'scrollLeft', offset: number) => {\n    const eventTarget = dom === document.documentElement ? window : dom;\n    dom[name] = offset;\n    const evt = new CustomEvent('scroll', {\n      detail: {\n        target: {\n          [name]: offset,\n        },\n      },\n    });\n    eventTarget.dispatchEvent(evt);\n    // must use setTimeout instead of nextTick to wait dom change\n    await sleep(0);\n  };\n\n  return { makeScroll, sleep };\n}\n\n/**\n * 测试相关的vitest方法\n */\nexport function useVitest(vi: typeof import('vitest')['vitest']) {\n  const getBoundingClientRect = (dom: Element) => vi.spyOn(dom, 'getBoundingClientRect');\n\n  return { getBoundingClientRect };\n}\n"],"names":["useTestUtils","makeScroll","_asyncToGenerator","_regeneratorRuntime","dom","name","offset","eventTarget","document","documentElement","window","evt","CustomEvent","detail","target","_defineProperty","dispatchEvent","sleep","useVitest","vi","getBoundingClientRect","spyOn"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAKO,SAASA,YAAe,GAAA;AAC7B,EAAA,IAAMC,UAAa,gBAAA,YAAA;AAAA,IAAA,IAAA,IAAA,GAAAC,qCAAA,eAAAC,uCAAA,CAAA,IAAA,CAAA,SAAOC,OAAAA,CAAAA,GAAc,EAAAC,IAAA,EAAkCC,MAAmB,EAAA;AAAA,MAAA,IAAA,WAAA,EAAA,GAAA,CAAA;AAAA,MAAA,OAAAH,uCAAA,CAAA,IAAA,CAAA,SAAA,QAAA,CAAA,QAAA,EAAA;AAAA,QAAA,OAAA,CAAA,EAAA;AAAA,UAAA,QAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AAAA,YAAA,KAAA,CAAA;cACrFI,WAAc,GAAAH,GAAA,KAAQI,QAAS,CAAAC,eAAA,GAAkBC,MAAS,GAAAN,GAAA,CAAA;AAChEA,cAAAA,GAAA,CAAIC,IAAQ,CAAA,GAAAC,MAAA,CAAA;AACNK,cAAAA,GAAA,GAAM,IAAIC,WAAA,CAAY,QAAU,EAAA;AACpCC,gBAAAA,MAAQ,EAAA;kBACNC,MAAQ,EAAAC,mCAAA,CAAA,EAAA,EACLV,IAAO,EAAAC,MAAA,CAAA;AAEZ,iBAAA;AACF,eAAC,CAAA,CAAA;AACDC,cAAAA,WAAA,CAAYS,cAAcL,GAAG,CAAA,CAAA;AAAA,cAAA,QAAA,CAAA,IAAA,GAAA,CAAA,CAAA;cAAA,OAEvBM,kBAAM,CAAC,CAAA,CAAA;AAAA,YAAA,KAAA,CAAA,CAAA;AAAA,YAAA,KAAA,KAAA;AAAA,cAAA,OAAA,QAAA,CAAA,IAAA,EAAA,CAAA;AAAA,WAAA;AAAA,SAAA;AAAA,OAAA,EAAA,OAAA,CAAA,CAAA;KACf,CAAA,CAAA,CAAA;AAAA,IAAA,OAAA,SAbMhB,UAAa,CAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA;AAAA,MAAA,OAAA,IAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,CAAA;AAAA,KAAA,CAAA;GAanB,EAAA,CAAA;EAEO,OAAA;AAAEA,IAAAA,YAAAA;AAAYgB,IAAAA,KAAM,EAANA,iBAAAA;GAAM,CAAA;AAC7B,CAAA;AAKO,SAASC,UAAUC,EAAuC,EAAA;AAC/D,EAAA,IAAMC,wBAAwB,SAAxBA,sBAAyBhB,GAAA,EAAA;AAAA,IAAA,OAAiBe,EAAG,CAAAE,KAAA,CAAMjB,KAAK,uBAAuB,CAAA,CAAA;AAAA,GAAA,CAAA;EAErF,OAAO;AAAEgB,IAAAA,qBAAsB,EAAtBA,qBAAAA;GAAsB,CAAA;AACjC;;;;;"}