{"version":3,"file":"upload.js","sources":["../../src/upload/upload.vue","../../src/upload/upload.vue?vue&type=template&id=89b3fa2e&lang.js"],"sourcesContent":["<template>\n  <div>\n    <ul :class=\"`${UPLOAD_NAME}__card`\">\n      <li v-for=\"(file, index) in uploadedFiles\" :key=\"index\" :class=\"`${UPLOAD_NAME}__card-item`\" :style=\"itemStyle\">\n        <div :class=\"`${UPLOAD_NAME}__card-content ${UPLOAD_NAME}__card-box`\" :style=\"itemContentStyle\">\n          <div\n            key=\"delete-icon\"\n            :class=\"`${UPLOAD_NAME}__card-delete-item`\"\n            @click=\"(e) => handleRemove(e, file, index)\"\n          >\n            <template v-if=\"deleteBtnContent\">\n              <t-node :content=\"deleteBtnContent\"></t-node>\n            </template>\n            <template v-else>\n              <close-icon class=\"close-icon\" />\n            </template>\n          </div>\n          <img :class=\"`${UPLOAD_NAME}__card-image`\" :src=\"file.url\" @click=\"(e) => handlePreview(e, file)\" />\n          <!--上传失败时，reload重试-->\n          <div v-if=\"file.status === 'fail'\" :class=\"`${UPLOAD_NAME}__card-mask`\">\n            <span key=\"refresh-icon\" :class=\"`${UPLOAD_NAME}__card-mask-item`\">\n              <refresh-icon @click=\"handleReload(file)\" />\n            </span>\n          </div>\n        </div>\n      </li>\n      <template v-if=\"defaultContent\">\n        <div @click=\"triggerUpload\">\n          <t-node :content=\"defaultContent\"></t-node>\n        </div>\n      </template>\n      <template v-else>\n        <li :class=\"`${UPLOAD_NAME}__card-item`\" @click=\"triggerUpload\">\n          <div :class=\"`${UPLOAD_NAME}__card-container ${UPLOAD_NAME}__card-box`\">\n            <add-icon></add-icon>\n          </div>\n        </li>\n      </template>\n    </ul>\n    <input\n      ref=\"inputRef\"\n      :value=\"files\"\n      type=\"file\"\n      :multiple=\"multiple\"\n      hidden\n      :accept=\"accept\"\n      @change=\"handleChange\"\n    />\n    <t-image-viewer v-model:images=\"images\" v-model=\"showViewer\" :initial-index=\"initialIndex\"></t-image-viewer>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, SetupContext, getCurrentInstance, ref, Ref, toRefs, computed, ComputedRef } from 'vue';\nimport { AddIcon, CloseIcon, RefreshIcon } from 'tdesign-icons-vue-next';\nimport findIndex from 'lodash/findIndex';\nimport isObject from 'lodash/isObject';\nimport isFunction from 'lodash/isFunction';\n\nimport xhr from '../_common/js/upload/xhr';\nimport { useDefault, useEmitEvent, renderTNode, TNode } from '../shared';\nimport { TdUploadProps, UploadFile, RequestMethodResponse, SizeLimitObj } from './type';\nimport { SuccessContext, InnerProgressContext } from './interface';\nimport UploadProps from './props';\nimport config from '../config';\nimport { isOverSizeLimit } from './util';\nimport TImageViewer from '../image-viewer';\n\nconst { prefix } = config;\nconst name = `${prefix}-upload`;\nconst { isArray } = Array;\n\nexport default defineComponent({\n  name,\n  components: {\n    AddIcon,\n    TNode,\n    CloseIcon,\n    RefreshIcon,\n    TImageViewer,\n  },\n  props: UploadProps,\n  emits: [\n    'update:files',\n    'update:modelValue',\n    'change',\n    'fail',\n    'preview',\n    'progress',\n    'remove',\n    'success',\n    'select-change',\n  ],\n  setup(props, context: SetupContext) {\n    const emitEvent = useEmitEvent(props, context.emit);\n    const [innerFiles, setInnerFiles] = useDefault<TdUploadProps['files'], TdUploadProps>(\n      props,\n      context.emit,\n      'files',\n      'change',\n    );\n    const internalInstance = getCurrentInstance();\n    const defaultContent = computed(() => renderTNode(internalInstance, 'default'));\n    const deleteBtnContent = computed(() => renderTNode(internalInstance, 'deleteBtn'));\n    const images: Ref<Array<string>> = ref([]);\n    const showViewer = ref(false);\n    const initialIndex = ref(0);\n    const UPLOAD_NAME = name;\n    const xhrReq = ref<XMLHttpRequest | null>(null);\n    // 等待上传的文件\n    const toUploadFiles: Ref<Array<UploadFile>> = ref([]);\n    // 上传成功的文件\n    const uploadedFiles: ComputedRef<UploadFile[]> = computed(() => {\n      if (innerFiles.value && isArray(innerFiles.value)) {\n        // 上传失败的文件用localUrl展示，并且可上传重试\n        return innerFiles.value;\n      }\n      return [];\n    });\n    const errorMsg = ref('');\n    const inputRef = ref<null | HTMLInputElement>(null);\n\n    const itemStyle = computed(() => {\n      const { gridConfig } = toRefs(props);\n      let column = 4;\n      if (isObject(gridConfig.value)) {\n        ({ column } = gridConfig.value as any);\n      }\n      return {\n        flexBasis: `${100 / +column}%`,\n      };\n    });\n\n    const itemContentStyle = computed(() => {\n      let width = 80;\n      let height = 80;\n      const { gridConfig } = toRefs(props);\n      if (isObject(gridConfig.value)) {\n        ({ width, height } = gridConfig.value as any);\n      }\n      return {\n        height: `${height}px`,\n        width: `${width}px`,\n      };\n    });\n\n    const triggerUpload = () => {\n      const input = inputRef.value as HTMLInputElement;\n      if (props.disabled) return;\n      input.click();\n    };\n\n    const handlePreview = (e: MouseEvent, file: UploadFile) => {\n      showViewer.value = true;\n      emitEvent('preview', {\n        e,\n        file,\n      });\n    };\n\n    const handleReload = (file: UploadFile) => {\n      uploadFiles([file.fileRaw]);\n    };\n\n    const handleChange = () => {\n      const input = inputRef.value;\n      if (props.disabled || !input || !input.files) return;\n      const formatFiles = formatFileToUploadFile(input.files);\n      emitEvent('select-change', [...formatFiles]);\n      uploadFiles(formatFiles);\n      input.value = '';\n    };\n\n    const formatFileToUploadFile = (files: FileList): File[] => {\n      const { format } = props;\n      if (!format || !isFunction(format)) {\n        const res = [];\n        for (let i = 0; i < files.length; i++) {\n          res.push(files[i]);\n        }\n        return res;\n      }\n\n      const NewFiles = [...files];\n      NewFiles.forEach((item) => {\n        item = format(item) as any;\n      });\n      return NewFiles;\n    };\n\n    const handleBeforeUpload = (file: File | UploadFile): Promise<boolean> => {\n      if (props.beforeUpload && isFunction(props.beforeUpload)) {\n        const beforeUpload = props.beforeUpload(file);\n        if (beforeUpload instanceof Promise) return beforeUpload;\n        return Promise.resolve(beforeUpload);\n      }\n      return new Promise((resolve) => {\n        if (props.sizeLimit) {\n          resolve(handleSizeLimit(file.size));\n        }\n        resolve(true);\n      });\n    };\n\n    const handleSizeLimit = (fileSize: number) => {\n      let sizeLimit: SizeLimitObj;\n      if (typeof props.sizeLimit === 'number') {\n        sizeLimit = { size: props.sizeLimit, unit: 'KB' };\n      } else if (typeof props.sizeLimit === 'object') {\n        sizeLimit = props.sizeLimit;\n      } else {\n        sizeLimit = { size: 0, unit: 'KB' };\n      }\n      const isOverSize = isOverSizeLimit(fileSize, sizeLimit.size, sizeLimit.unit);\n      if (isOverSize) {\n        errorMsg.value = sizeLimit.message\n          ? sizeLimit.message\n          : `TDesign Upoad Error: uploaded picture exceeds ${props.sizeLimit}${sizeLimit.unit} restrictions`;\n      }\n      return isOverSize;\n    };\n\n    const uploadFiles = (files: File[]) => {\n      const { max } = toRefs(props);\n      let tmpFiles = [...files];\n      if (max.value) {\n        tmpFiles = tmpFiles.slice(0, max.value - uploadedFiles.value.length);\n        if (tmpFiles.length !== files.length) {\n          console.warn(`TDesign Upload Warn: you can only upload ${max.value} files`);\n        }\n      }\n      tmpFiles.forEach((fileRaw: any) => {\n        const uploadFile: UploadFile = {\n          ...fileRaw,\n          fileRaw,\n          lastModified: fileRaw.lastModified,\n          name: fileRaw.name,\n          size: fileRaw.size,\n          type: fileRaw.type,\n          percent: 0,\n          status: 'waiting',\n        };\n        const reader = new FileReader();\n        reader.readAsDataURL(fileRaw);\n        reader.onload = (event: ProgressEvent<FileReader>) => {\n          uploadFile.url = event.target?.result as string;\n        };\n        handleBeforeUpload(fileRaw).then((canUpload) => {\n          if (!canUpload) return;\n          const newFiles: Array<UploadFile> = toUploadFiles.value.concat();\n\n          // 判断是否为重复文件条件，已选是否存在检验\n          if (props.allowUploadDuplicateFile || !toUploadFiles.value.find((file) => file.name === uploadFile.name)) {\n            newFiles.push(uploadFile);\n          }\n          toUploadFiles.value = newFiles;\n          if (props.autoUpload) {\n            upload(uploadFile);\n          }\n        });\n      });\n    };\n\n    /** 模拟进度条 Mock Progress */\n    const handleMockProgress = (file: UploadFile) => {\n      const timer = setInterval(() => {\n        if (file.status === 'success' || file.percent >= 99) {\n          clearInterval(timer);\n          return;\n        }\n        file.percent += 1;\n        handleProgress({\n          file,\n          percent: file.percent,\n          type: 'mock',\n        });\n      }, 10);\n    };\n\n    const handleProgress = ({ event, file, percent, type = 'real' }: InnerProgressContext) => {\n      if (!file) throw new Error('Error file');\n      file.percent = Math.min(percent, 100);\n      const progressCtx = {\n        percent,\n        e: event,\n        file,\n        type,\n      };\n      emitEvent('progress', progressCtx);\n    };\n\n    const handleRemove = (e: MouseEvent, file: UploadFile, index: number) => {\n      errorMsg.value = '';\n      const files = uploadedFiles.value.concat();\n      files.splice(index, 1);\n      setInnerFiles(files, { e, trigger: 'remove', index, file });\n      emitEvent('remove', { e, index, file });\n      images.value.splice(index, 1);\n    };\n\n    const upload = async (file: UploadFile): Promise<void> => {\n      if (!props.action && !props.requestMethod) {\n        console.error('TDesign Upload Error: one of action and requestMethod must be exist.');\n        return;\n      }\n      errorMsg.value = '';\n      file.status = 'progress';\n      // requestMethod 为父组件定义的自定义上传方法\n      if (props.requestMethod) {\n        handleRequestMethod(file);\n      } else {\n        // 模拟进度条\n        if (props.useMockProgress) {\n          handleMockProgress(file);\n        }\n        const request = xhr;\n        xhrReq.value = request({\n          action: props.action,\n          data: {\n            file: file.fileRaw,\n            ...props.data,\n          },\n          file,\n          method: props.method,\n          headers: props.headers || {},\n          withCredentials: props.withCredentials,\n          onError: handleError,\n          onProgress: handleProgress,\n          onSuccess: handleSuccess,\n        } as any);\n      }\n    };\n\n    const handleRequestMethod = (file: UploadFile) => {\n      if (!isFunction(props.requestMethod)) {\n        console.warn('TDesign Upload Warn: `requestMethod` must be a function.');\n        return;\n      }\n      props.requestMethod?.(file).then((res: RequestMethodResponse) => {\n        if (!handleRequestMethodResponse(res)) return;\n        if (res.status === 'success') {\n          handleSuccess({ file, response: res.response });\n        } else if (res.status === 'fail') {\n          const r = res.response || {};\n          handleError({ event: undefined, file, response: { ...r, error: res.error } });\n        }\n      });\n    };\n\n    const handleRequestMethodResponse = (res: RequestMethodResponse) => {\n      if (!res) {\n        console.error('TDesign Upoad Error: `requestMethodResponse` is required.');\n        return false;\n      }\n      if (!res.status) {\n        console.error(\n          'TDesign Upoad Error: `requestMethodResponse.status` is missing, which value is `success` or `fail`',\n        );\n        return false;\n      }\n      if (!['success', 'fail'].includes(res.status)) {\n        console.error('TDesign Upoad Error: `requestMethodResponse.status` must be `success` or `fail`');\n        return false;\n      }\n      if (res.status === 'success' && (!res.response || !res.response.url)) {\n        console.warn(\n          'TDesign Upoad Warn: `requestMethodResponse.response.url` is required, when `status` is `success`',\n        );\n      }\n      return true;\n    };\n\n    const handleSuccess = ({ event, file, response }: SuccessContext) => {\n      if (!file) throw new Error('Error file');\n      file.status = 'success';\n      let res = response;\n      if (props.formatResponse && isFunction(props.formatResponse)) {\n        res = props.formatResponse(response, { file: file as UploadFile });\n      }\n      // 如果返回值存在 error，则认为当前接口上传失败\n      if (res?.error) {\n        handleError({\n          event,\n          file: file as UploadFile,\n          response: res,\n          resFormatted: true,\n        });\n        return;\n      }\n      file.url = res?.url || file.url;\n      // 从待上传文件队列中移除上传成功的文件\n      const index = findIndex(toUploadFiles.value, (o: UploadFile) => o.name === file.name);\n      toUploadFiles.value.splice(index, 1);\n      // 上传成功的文件发送到 files\n      const newFile = { ...file, response: res };\n      const files = uploadedFiles.value.concat(newFile as UploadFile);\n      setInnerFiles(files, { e: event, response: res, trigger: 'upload-success' });\n      emitEvent('success', {\n        file,\n        fileList: files,\n        e: event,\n        response: res,\n      });\n      images.value.push(newFile.url as string);\n    };\n\n    const handleError = (options: {\n      event?: ProgressEvent;\n      file: UploadFile;\n      response?: any;\n      resFormatted?: boolean;\n    }) => {\n      const { event, file, response, resFormatted } = options;\n      file.status = 'fail';\n      let res = response;\n      if (!resFormatted && props.formatResponse && isFunction(props.formatResponse)) {\n        res = props.formatResponse(response, { file });\n      }\n      errorMsg.value = res?.error;\n      if (\n        !uploadedFiles.value.find((item) => {\n          return item.name === file.name;\n        })\n      ) {\n        const files = uploadedFiles.value.concat(file);\n        setInnerFiles(files, { e: event, response: res, trigger: 'upload-fail' });\n      }\n      emitEvent('fail', { e: event, file });\n    };\n\n    return {\n      ...toRefs(props),\n      UPLOAD_NAME,\n      images,\n      showViewer,\n      initialIndex,\n      prefix,\n      innerFiles,\n      xhrReq,\n      toUploadFiles,\n      errorMsg,\n      inputRef,\n      uploadedFiles,\n      deleteBtnContent,\n      defaultContent,\n      itemStyle,\n      itemContentStyle,\n      emitEvent,\n      setInnerFiles,\n      triggerUpload,\n      handleChange,\n      handlePreview,\n      handleReload,\n      handleBeforeUpload,\n      handleSizeLimit,\n      uploadFiles,\n      handleMockProgress,\n      handleProgress,\n      handleRemove,\n      upload,\n      handleRequestMethodResponse,\n      handleSuccess,\n      handleError,\n    };\n  },\n});\n</script>\n","<template>\n  <div>\n    <ul :class=\"`${UPLOAD_NAME}__card`\">\n      <li v-for=\"(file, index) in uploadedFiles\" :key=\"index\" :class=\"`${UPLOAD_NAME}__card-item`\" :style=\"itemStyle\">\n        <div :class=\"`${UPLOAD_NAME}__card-content ${UPLOAD_NAME}__card-box`\" :style=\"itemContentStyle\">\n          <div\n            key=\"delete-icon\"\n            :class=\"`${UPLOAD_NAME}__card-delete-item`\"\n            @click=\"(e) => handleRemove(e, file, index)\"\n          >\n            <template v-if=\"deleteBtnContent\">\n              <t-node :content=\"deleteBtnContent\"></t-node>\n            </template>\n            <template v-else>\n              <close-icon class=\"close-icon\" />\n            </template>\n          </div>\n          <img :class=\"`${UPLOAD_NAME}__card-image`\" :src=\"file.url\" @click=\"(e) => handlePreview(e, file)\" />\n          <!--上传失败时，reload重试-->\n          <div v-if=\"file.status === 'fail'\" :class=\"`${UPLOAD_NAME}__card-mask`\">\n            <span key=\"refresh-icon\" :class=\"`${UPLOAD_NAME}__card-mask-item`\">\n              <refresh-icon @click=\"handleReload(file)\" />\n            </span>\n          </div>\n        </div>\n      </li>\n      <template v-if=\"defaultContent\">\n        <div @click=\"triggerUpload\">\n          <t-node :content=\"defaultContent\"></t-node>\n        </div>\n      </template>\n      <template v-else>\n        <li :class=\"`${UPLOAD_NAME}__card-item`\" @click=\"triggerUpload\">\n          <div :class=\"`${UPLOAD_NAME}__card-container ${UPLOAD_NAME}__card-box`\">\n            <add-icon></add-icon>\n          </div>\n        </li>\n      </template>\n    </ul>\n    <input\n      ref=\"inputRef\"\n      :value=\"files\"\n      type=\"file\"\n      :multiple=\"multiple\"\n      hidden\n      :accept=\"accept\"\n      @change=\"handleChange\"\n    />\n    <t-image-viewer v-model:images=\"images\" v-model=\"showViewer\" :initial-index=\"initialIndex\"></t-image-viewer>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, SetupContext, getCurrentInstance, ref, Ref, toRefs, computed, ComputedRef } from 'vue';\nimport { AddIcon, CloseIcon, RefreshIcon } from 'tdesign-icons-vue-next';\nimport findIndex from 'lodash/findIndex';\nimport isObject from 'lodash/isObject';\nimport isFunction from 'lodash/isFunction';\n\nimport xhr from '../_common/js/upload/xhr';\nimport { useDefault, useEmitEvent, renderTNode, TNode } from '../shared';\nimport { TdUploadProps, UploadFile, RequestMethodResponse, SizeLimitObj } from './type';\nimport { SuccessContext, InnerProgressContext } from './interface';\nimport UploadProps from './props';\nimport config from '../config';\nimport { isOverSizeLimit } from './util';\nimport TImageViewer from '../image-viewer';\n\nconst { prefix } = config;\nconst name = `${prefix}-upload`;\nconst { isArray } = Array;\n\nexport default defineComponent({\n  name,\n  components: {\n    AddIcon,\n    TNode,\n    CloseIcon,\n    RefreshIcon,\n    TImageViewer,\n  },\n  props: UploadProps,\n  emits: [\n    'update:files',\n    'update:modelValue',\n    'change',\n    'fail',\n    'preview',\n    'progress',\n    'remove',\n    'success',\n    'select-change',\n  ],\n  setup(props, context: SetupContext) {\n    const emitEvent = useEmitEvent(props, context.emit);\n    const [innerFiles, setInnerFiles] = useDefault<TdUploadProps['files'], TdUploadProps>(\n      props,\n      context.emit,\n      'files',\n      'change',\n    );\n    const internalInstance = getCurrentInstance();\n    const defaultContent = computed(() => renderTNode(internalInstance, 'default'));\n    const deleteBtnContent = computed(() => renderTNode(internalInstance, 'deleteBtn'));\n    const images: Ref<Array<string>> = ref([]);\n    const showViewer = ref(false);\n    const initialIndex = ref(0);\n    const UPLOAD_NAME = name;\n    const xhrReq = ref<XMLHttpRequest | null>(null);\n    // 等待上传的文件\n    const toUploadFiles: Ref<Array<UploadFile>> = ref([]);\n    // 上传成功的文件\n    const uploadedFiles: ComputedRef<UploadFile[]> = computed(() => {\n      if (innerFiles.value && isArray(innerFiles.value)) {\n        // 上传失败的文件用localUrl展示，并且可上传重试\n        return innerFiles.value;\n      }\n      return [];\n    });\n    const errorMsg = ref('');\n    const inputRef = ref<null | HTMLInputElement>(null);\n\n    const itemStyle = computed(() => {\n      const { gridConfig } = toRefs(props);\n      let column = 4;\n      if (isObject(gridConfig.value)) {\n        ({ column } = gridConfig.value as any);\n      }\n      return {\n        flexBasis: `${100 / +column}%`,\n      };\n    });\n\n    const itemContentStyle = computed(() => {\n      let width = 80;\n      let height = 80;\n      const { gridConfig } = toRefs(props);\n      if (isObject(gridConfig.value)) {\n        ({ width, height } = gridConfig.value as any);\n      }\n      return {\n        height: `${height}px`,\n        width: `${width}px`,\n      };\n    });\n\n    const triggerUpload = () => {\n      const input = inputRef.value as HTMLInputElement;\n      if (props.disabled) return;\n      input.click();\n    };\n\n    const handlePreview = (e: MouseEvent, file: UploadFile) => {\n      showViewer.value = true;\n      emitEvent('preview', {\n        e,\n        file,\n      });\n    };\n\n    const handleReload = (file: UploadFile) => {\n      uploadFiles([file.fileRaw]);\n    };\n\n    const handleChange = () => {\n      const input = inputRef.value;\n      if (props.disabled || !input || !input.files) return;\n      const formatFiles = formatFileToUploadFile(input.files);\n      emitEvent('select-change', [...formatFiles]);\n      uploadFiles(formatFiles);\n      input.value = '';\n    };\n\n    const formatFileToUploadFile = (files: FileList): File[] => {\n      const { format } = props;\n      if (!format || !isFunction(format)) {\n        const res = [];\n        for (let i = 0; i < files.length; i++) {\n          res.push(files[i]);\n        }\n        return res;\n      }\n\n      const NewFiles = [...files];\n      NewFiles.forEach((item) => {\n        item = format(item) as any;\n      });\n      return NewFiles;\n    };\n\n    const handleBeforeUpload = (file: File | UploadFile): Promise<boolean> => {\n      if (props.beforeUpload && isFunction(props.beforeUpload)) {\n        const beforeUpload = props.beforeUpload(file);\n        if (beforeUpload instanceof Promise) return beforeUpload;\n        return Promise.resolve(beforeUpload);\n      }\n      return new Promise((resolve) => {\n        if (props.sizeLimit) {\n          resolve(handleSizeLimit(file.size));\n        }\n        resolve(true);\n      });\n    };\n\n    const handleSizeLimit = (fileSize: number) => {\n      let sizeLimit: SizeLimitObj;\n      if (typeof props.sizeLimit === 'number') {\n        sizeLimit = { size: props.sizeLimit, unit: 'KB' };\n      } else if (typeof props.sizeLimit === 'object') {\n        sizeLimit = props.sizeLimit;\n      } else {\n        sizeLimit = { size: 0, unit: 'KB' };\n      }\n      const isOverSize = isOverSizeLimit(fileSize, sizeLimit.size, sizeLimit.unit);\n      if (isOverSize) {\n        errorMsg.value = sizeLimit.message\n          ? sizeLimit.message\n          : `TDesign Upoad Error: uploaded picture exceeds ${props.sizeLimit}${sizeLimit.unit} restrictions`;\n      }\n      return isOverSize;\n    };\n\n    const uploadFiles = (files: File[]) => {\n      const { max } = toRefs(props);\n      let tmpFiles = [...files];\n      if (max.value) {\n        tmpFiles = tmpFiles.slice(0, max.value - uploadedFiles.value.length);\n        if (tmpFiles.length !== files.length) {\n          console.warn(`TDesign Upload Warn: you can only upload ${max.value} files`);\n        }\n      }\n      tmpFiles.forEach((fileRaw: any) => {\n        const uploadFile: UploadFile = {\n          ...fileRaw,\n          fileRaw,\n          lastModified: fileRaw.lastModified,\n          name: fileRaw.name,\n          size: fileRaw.size,\n          type: fileRaw.type,\n          percent: 0,\n          status: 'waiting',\n        };\n        const reader = new FileReader();\n        reader.readAsDataURL(fileRaw);\n        reader.onload = (event: ProgressEvent<FileReader>) => {\n          uploadFile.url = event.target?.result as string;\n        };\n        handleBeforeUpload(fileRaw).then((canUpload) => {\n          if (!canUpload) return;\n          const newFiles: Array<UploadFile> = toUploadFiles.value.concat();\n\n          // 判断是否为重复文件条件，已选是否存在检验\n          if (props.allowUploadDuplicateFile || !toUploadFiles.value.find((file) => file.name === uploadFile.name)) {\n            newFiles.push(uploadFile);\n          }\n          toUploadFiles.value = newFiles;\n          if (props.autoUpload) {\n            upload(uploadFile);\n          }\n        });\n      });\n    };\n\n    /** 模拟进度条 Mock Progress */\n    const handleMockProgress = (file: UploadFile) => {\n      const timer = setInterval(() => {\n        if (file.status === 'success' || file.percent >= 99) {\n          clearInterval(timer);\n          return;\n        }\n        file.percent += 1;\n        handleProgress({\n          file,\n          percent: file.percent,\n          type: 'mock',\n        });\n      }, 10);\n    };\n\n    const handleProgress = ({ event, file, percent, type = 'real' }: InnerProgressContext) => {\n      if (!file) throw new Error('Error file');\n      file.percent = Math.min(percent, 100);\n      const progressCtx = {\n        percent,\n        e: event,\n        file,\n        type,\n      };\n      emitEvent('progress', progressCtx);\n    };\n\n    const handleRemove = (e: MouseEvent, file: UploadFile, index: number) => {\n      errorMsg.value = '';\n      const files = uploadedFiles.value.concat();\n      files.splice(index, 1);\n      setInnerFiles(files, { e, trigger: 'remove', index, file });\n      emitEvent('remove', { e, index, file });\n      images.value.splice(index, 1);\n    };\n\n    const upload = async (file: UploadFile): Promise<void> => {\n      if (!props.action && !props.requestMethod) {\n        console.error('TDesign Upload Error: one of action and requestMethod must be exist.');\n        return;\n      }\n      errorMsg.value = '';\n      file.status = 'progress';\n      // requestMethod 为父组件定义的自定义上传方法\n      if (props.requestMethod) {\n        handleRequestMethod(file);\n      } else {\n        // 模拟进度条\n        if (props.useMockProgress) {\n          handleMockProgress(file);\n        }\n        const request = xhr;\n        xhrReq.value = request({\n          action: props.action,\n          data: {\n            file: file.fileRaw,\n            ...props.data,\n          },\n          file,\n          method: props.method,\n          headers: props.headers || {},\n          withCredentials: props.withCredentials,\n          onError: handleError,\n          onProgress: handleProgress,\n          onSuccess: handleSuccess,\n        } as any);\n      }\n    };\n\n    const handleRequestMethod = (file: UploadFile) => {\n      if (!isFunction(props.requestMethod)) {\n        console.warn('TDesign Upload Warn: `requestMethod` must be a function.');\n        return;\n      }\n      props.requestMethod?.(file).then((res: RequestMethodResponse) => {\n        if (!handleRequestMethodResponse(res)) return;\n        if (res.status === 'success') {\n          handleSuccess({ file, response: res.response });\n        } else if (res.status === 'fail') {\n          const r = res.response || {};\n          handleError({ event: undefined, file, response: { ...r, error: res.error } });\n        }\n      });\n    };\n\n    const handleRequestMethodResponse = (res: RequestMethodResponse) => {\n      if (!res) {\n        console.error('TDesign Upoad Error: `requestMethodResponse` is required.');\n        return false;\n      }\n      if (!res.status) {\n        console.error(\n          'TDesign Upoad Error: `requestMethodResponse.status` is missing, which value is `success` or `fail`',\n        );\n        return false;\n      }\n      if (!['success', 'fail'].includes(res.status)) {\n        console.error('TDesign Upoad Error: `requestMethodResponse.status` must be `success` or `fail`');\n        return false;\n      }\n      if (res.status === 'success' && (!res.response || !res.response.url)) {\n        console.warn(\n          'TDesign Upoad Warn: `requestMethodResponse.response.url` is required, when `status` is `success`',\n        );\n      }\n      return true;\n    };\n\n    const handleSuccess = ({ event, file, response }: SuccessContext) => {\n      if (!file) throw new Error('Error file');\n      file.status = 'success';\n      let res = response;\n      if (props.formatResponse && isFunction(props.formatResponse)) {\n        res = props.formatResponse(response, { file: file as UploadFile });\n      }\n      // 如果返回值存在 error，则认为当前接口上传失败\n      if (res?.error) {\n        handleError({\n          event,\n          file: file as UploadFile,\n          response: res,\n          resFormatted: true,\n        });\n        return;\n      }\n      file.url = res?.url || file.url;\n      // 从待上传文件队列中移除上传成功的文件\n      const index = findIndex(toUploadFiles.value, (o: UploadFile) => o.name === file.name);\n      toUploadFiles.value.splice(index, 1);\n      // 上传成功的文件发送到 files\n      const newFile = { ...file, response: res };\n      const files = uploadedFiles.value.concat(newFile as UploadFile);\n      setInnerFiles(files, { e: event, response: res, trigger: 'upload-success' });\n      emitEvent('success', {\n        file,\n        fileList: files,\n        e: event,\n        response: res,\n      });\n      images.value.push(newFile.url as string);\n    };\n\n    const handleError = (options: {\n      event?: ProgressEvent;\n      file: UploadFile;\n      response?: any;\n      resFormatted?: boolean;\n    }) => {\n      const { event, file, response, resFormatted } = options;\n      file.status = 'fail';\n      let res = response;\n      if (!resFormatted && props.formatResponse && isFunction(props.formatResponse)) {\n        res = props.formatResponse(response, { file });\n      }\n      errorMsg.value = res?.error;\n      if (\n        !uploadedFiles.value.find((item) => {\n          return item.name === file.name;\n        })\n      ) {\n        const files = uploadedFiles.value.concat(file);\n        setInnerFiles(files, { e: event, response: res, trigger: 'upload-fail' });\n      }\n      emitEvent('fail', { e: event, file });\n    };\n\n    return {\n      ...toRefs(props),\n      UPLOAD_NAME,\n      images,\n      showViewer,\n      initialIndex,\n      prefix,\n      innerFiles,\n      xhrReq,\n      toUploadFiles,\n      errorMsg,\n      inputRef,\n      uploadedFiles,\n      deleteBtnContent,\n      defaultContent,\n      itemStyle,\n      itemContentStyle,\n      emitEvent,\n      setInnerFiles,\n      triggerUpload,\n      handleChange,\n      handlePreview,\n      handleReload,\n      handleBeforeUpload,\n      handleSizeLimit,\n      uploadFiles,\n      handleMockProgress,\n      handleProgress,\n      handleRemove,\n      upload,\n      handleRequestMethodResponse,\n      handleSuccess,\n      handleError,\n    };\n  },\n});\n</script>\n"],"names":["prefix","config","name","isArray","Array","defineComponent","components","AddIcon","TNode","CloseIcon","RefreshIcon","TImageViewer","props","UploadProps","emits","setup","context","emitEvent","useEmitEvent","emit","useDefault","innerFiles","setInnerFiles","internalInstance","getCurrentInstance","defaultContent","computed","renderTNode","deleteBtnContent","images","ref","showViewer","initialIndex","UPLOAD_NAME","xhrReq","toUploadFiles","uploadedFiles","value","errorMsg","inputRef","itemStyle","toRefs","gridConfig","column","isObject","flexBasis","itemContentStyle","width","height","triggerUpload","input","disabled","click","handlePreview","e","file","handleReload","uploadFiles","fileRaw","handleChange","files","formatFiles","formatFileToUploadFile","format","isFunction","res","i","length","push","NewFiles","forEach","item","handleBeforeUpload","beforeUpload","Promise","resolve","sizeLimit","handleSizeLimit","size","fileSize","unit","isOverSize","isOverSizeLimit","message","max","tmpFiles","slice","console","warn","uploadFile","lastModified","type","percent","status","reader","FileReader","readAsDataURL","onload","event","url","target","result","then","canUpload","newFiles","concat","allowUploadDuplicateFile","find","autoUpload","upload","handleMockProgress","timer","setInterval","clearInterval","handleProgress","Error","Math","min","progressCtx","handleRemove","index","splice","trigger","action","requestMethod","error","handleRequestMethod","useMockProgress","request","xhr","data","method","headers","withCredentials","onError","handleError","onProgress","onSuccess","handleSuccess","handleRequestMethodResponse","response","r","includes","formatResponse","resFormatted","findIndex","o","newFile","fileList","options","_createElementBlock","_createElementVNode","class","_ctx","_openBlock","_Fragment","_renderList","key","style","_normalizeClass","onClick","_createBlock","_component_t_node","content","_component_close_icon","src","_createVNode","_component_refresh_icon","$event","_component_add_icon","multiple","hidden","accept","onChange","_component_t_image_viewer"],"mappings":"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"}