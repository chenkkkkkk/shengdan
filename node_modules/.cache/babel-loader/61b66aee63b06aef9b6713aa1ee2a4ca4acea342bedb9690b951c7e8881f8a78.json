{"ast":null,"code":"/**\n * tdesign v0.14.1\n * (c) 2022 TDesign Group\n * @license MIT\n */\n\nimport { computed } from 'vue';\nimport intersection from 'lodash/intersection';\nvar setCheckAllStatus = function setCheckAllStatus(optionList, innerValue, checkedSet) {\n  var isArray = Array.isArray;\n  var intersectionLen = computed(function () {\n    var _optionList$value;\n    var values = (_optionList$value = optionList.value) === null || _optionList$value === void 0 ? void 0 : _optionList$value.map(function (item) {\n      return item.value;\n    });\n    if (isArray(innerValue.value)) {\n      return intersection(innerValue.value, values).length;\n    }\n    return 0;\n  });\n  var isAllChecked = computed(function () {\n    if (checkedSet.value.size !== optionList.value.length - 1) {\n      return false;\n    }\n    return intersectionLen.value === optionList.value.length - 1;\n  });\n  var indeterminate = computed(function () {\n    return !isAllChecked.value && intersectionLen.value < optionList.value.length && intersectionLen.value > 0;\n  });\n  return computed(function () {\n    if (isAllChecked.value) return \"checked\";\n    if (indeterminate.value) return \"indeterminate\";\n    return \"uncheck\";\n  });\n};\nexport { setCheckAllStatus };","map":{"version":3,"mappings":";;;;;;;;AAIO,IAAMA,iBAAoB,YAApBA,iBAAoB,CAACC,UAAwB,cAAiBC,UAA4B;EAC/F,IAAEC,UAAYC,MAAZD;EACF,sBAAkBE,SAAS,YAAM;IAAA;IACrC,IAAMC,SAASL,+BAAW,4DAAXM,iBAAkBC,KAAI,UAACC;MAAA,OAASA,KAAKC,KAAK;KAAA;IACrD,YAAQC,UAAW,MAAK,CAAG;MAC7B,OAAOC,YAAa,YAAWF,KAAO,QAAM,CAAE;IAChD;IACO;EACT,CAAC;EAEK,mBAAeL,SAAS,YAAM;IAClC,IAAIH,WAAWQ,KAAM,UAAST,UAAW,OAAMY,SAAS,CAAG;MAClD;IACT;IACA,OAAOC,eAAgB,WAAUb,UAAW,OAAMY,MAAS;EAC7D,CAAC;EAEK,oBAAgBR,SAAS,YAAM;IAC5B,QAACU,aAAaL,KAAS,oBAAgBA,QAAQT,UAAW,OAAMY,MAAU,oBAAgBH,KAAQ;EAC3G,CAAC;EAED,OAAOL,SAAS,YAAM;IACpB,IAAIU,YAAa,QAAc;IAC/B,IAAIC,aAAc,QAAc;IACzB;EACT,CAAC;AACH","names":["setCheckAllStatus","optionList","checkedSet","isArray","Array","computed","values","_optionList$value","map","item","value","innerValue","intersection","length","intersectionLen","isAllChecked","indeterminate"],"sources":["../../../src/checkbox/hooks/setCheckAllStatus.ts"],"sourcesContent":["// 计算全选按钮的状态\nimport { computed, ref, ComputedRef, Ref } from 'vue';\nimport intersection from 'lodash/intersection';\n\nexport const setCheckAllStatus = (optionList: Ref<any[]>, innerValue: Ref, checkedSet: ComputedRef) => {\n  const { isArray } = Array;\n  const intersectionLen = computed(() => {\n    const values = optionList.value?.map((item) => item.value);\n    if (isArray(innerValue.value)) {\n      return intersection(innerValue.value, values).length;\n    }\n    return 0;\n  });\n\n  const isAllChecked = computed(() => {\n    if (checkedSet.value.size !== optionList.value.length - 1) {\n      return false;\n    }\n    return intersectionLen.value === optionList.value.length - 1;\n  });\n\n  const indeterminate = computed(() => {\n    return !isAllChecked.value && intersectionLen.value < optionList.value.length && intersectionLen.value > 0;\n  });\n\n  return computed(() => {\n    if (isAllChecked.value) return 'checked';\n    if (indeterminate.value) return 'indeterminate';\n    return 'uncheck';\n  });\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}