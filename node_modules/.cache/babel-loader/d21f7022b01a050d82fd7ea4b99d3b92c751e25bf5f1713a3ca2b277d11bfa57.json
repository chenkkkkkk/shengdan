{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v0.14.1\n * (c) 2022 TDesign Group\n * @license MIT\n */\n\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { ref, defineComponent, h, createApp, nextTick } from 'vue';\nimport script from './message.js';\nimport './style/css.js';\nimport '@babel/runtime/helpers/slicedToArray';\nimport 'tdesign-icons-vue-next';\nimport 'lodash';\nimport './props.js';\nimport '../config.js';\nimport '../shared/index.js';\nimport '../shared/functions.js';\nimport '../shared/util.js';\nimport '../shared/component.js';\nimport '../shared/constants.js';\nimport '../shared/render.js';\nimport '@babel/runtime/helpers/typeof';\nimport 'lodash/camelCase';\nimport '../shared/render-tnode.js';\nimport '../shared/useToggle/index.js';\nimport '../shared/useCountDown/index.js';\nimport '@babel/runtime/helpers/asyncToGenerator';\nimport '@babel/runtime/regenerator';\nimport '@vueuse/core';\nimport '../shared/useCountDown/utils.js';\nimport '../shared/useDefault/index.js';\nimport '../shared/useEmitEvent/index.js';\nimport '../shared/useChildSlots/index.js';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '../shared/useVModel/index.js';\nimport '../shared/useTouch/index.js';\nimport '../shared/useScrollParent/index.js';\nimport '../shared/useExpose/index.js';\nimport '../shared/useTest/index.js';\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction create(props) {\n  var visible = ref(false);\n  var root = document.createElement(\"div\");\n  document.body.appendChild(root);\n  var component = defineComponent({\n    render: function render() {\n      return h(script, _objectSpread(_objectSpread({}, props), {}, {\n        visible: visible.value,\n        onClose: function onClose() {\n          visible.value = false;\n        },\n        onClosed: function onClosed() {\n          root.remove();\n        }\n      }));\n    }\n  });\n  createApp(component).mount(root);\n  nextTick(function () {\n    visible.value = true;\n  });\n}\nvar defaultProps = {\n  align: \"left\",\n  closeBtn: false,\n  content: \"\",\n  duration: 3e3,\n  theme: \"info\",\n  visible: false,\n  zIndex: 5e3,\n  onClose: function onClose() {},\n  onClosed: function onClosed() {},\n  onOpen: function onOpen() {},\n  onOpened: function onOpened() {},\n  onChange: function onChange() {}\n};\n[\"info\", \"success\", \"warning\", \"error\"].forEach(function (theme) {\n  script[theme] = function (options) {\n    var props = _objectSpread(_objectSpread({}, defaultProps), {}, {\n      theme: theme\n    });\n    if (typeof options === \"string\") {\n      props.content = options;\n    } else {\n      props = _objectSpread(_objectSpread({}, props), options);\n    }\n    create(props);\n  };\n});\nscript.install = function (app) {\n  var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n  app.component(name || script.name, script);\n  app.config.globalProperties.$message = script;\n};\nvar MessagePlugin = script;\nexport { MessagePlugin, MessagePlugin as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,SAASA,OAAOC,KAA6B;EACrC,cAAUC,IAAI,KAAK;EACnB,WAAOC,QAAS,eAAc,KAAK;EAChCA,cAAKC,YAAYC,IAAI;EAE9B,IAAMC,YAAYC,eAAgB;IAChCC,QAAQ;MAAA,OAENC,EAAEC,MAAS,kCACNT;QACHU,SAASA,OAAQ;QACjBC,SAAS,SAAMA;UACbD,QAAQE,KAAQ;SAClB;QACAC,UAAU,SAAMA;UACdT,KAAKU,MAAO;QACd;OACD;IAAA;EACL,CAAC;EAESC,mBAAS,CAAE,OAAMX,IAAI;EAE/BY,SAAS,YAAM;IACbN,QAAQE,KAAQ;EAClB,CAAC;AACH;AAEA,IAAMK,YAA+B;EACnCC,KAAO;EACPC,QAAU;EACVC,OAAS;EACTC,QAAU;EACVC,KAAO;EACPZ,OAAS;EACTa,MAAQ;EACRZ,SAAS,SAAMA,YAAC;EAChBE,UAAU,SAAMA,aAAC;EACjBW,QAAQ,SAAMA,WAAC;EACfC,UAAU,SAAMA,aAAC;EACjBC,UAAU,oBAAM;AAClB;AAEC,CAAC,QAAQ,SAAW,aAAW,OAAO,CAAyB,SAAQ,UAACJ,KAAkC;EACjGb,gBAAS,UAACkB,OAAqC;IACrD,IAAI3B,KAAwB,mCACvBiB;MACHK;KACF;IAEI,WAAOK,YAAY,QAAU;MAC/B3B,MAAMoB,OAAU;IAClB,CAAO;MACLpB,QAAaA,qCAAO,CAAG2B,SAAQ;IACjC;IAEA5B,OAAOC,KAAK;GACd;AACF,CAAC;AAEDS,OAAQmB,OAAU,aAACC,GAAU,EAAc;EAAA,IAAdC,2EAAO,EAAO;EACzCD,IAAIxB,SAAU,SAAQI,MAAQ,OAAMA,MAAO;EAIvCoB,WAAOE,iBAAiBC,QAAW;AACzC;AAaO,IAAMC,aAA8D","names":["create","props","ref","document","appendChild","root","component","defineComponent","render","h","Message","visible","onClose","value","onClosed","remove","createApp","nextTick","defaultProps","align","closeBtn","content","duration","theme","zIndex","onOpen","onOpened","onChange","options","install","app","name","globalProperties","$message","MessagePlugin"],"sources":["../../src/message/index.ts"],"sourcesContent":["import { createApp, defineComponent, ref, h, VNode, App, nextTick } from 'vue';\nimport Message from './message.vue';\nimport { WithInstallType } from '../shared';\nimport { TdMessageProps, MessageThemeList } from './type';\n\nimport './style';\n\nfunction create(props: TdMessageProps): void {\n  const visible = ref(false);\n  const root = document.createElement('div');\n  document.body.appendChild(root);\n\n  const component = defineComponent({\n    render: (): VNode =>\n      // @ts-ignore\n      h(Message, {\n        ...props,\n        visible: visible.value,\n        onClose: () => {\n          visible.value = false;\n        },\n        onClosed: () => {\n          root.remove();\n        },\n      }),\n  });\n\n  createApp(component).mount(root);\n\n  nextTick(() => {\n    visible.value = true;\n  });\n}\n\nconst defaultProps: TdMessageProps = {\n  align: 'left',\n  closeBtn: false,\n  content: '',\n  duration: 3000,\n  theme: 'info',\n  visible: false,\n  zIndex: 5000,\n  onClose: () => {},\n  onClosed: () => {},\n  onOpen: () => {},\n  onOpened: () => {},\n  onChange: () => {},\n};\n\n(['info', 'success', 'warning', 'error'] as MessageThemeList[]).forEach((theme: MessageThemeList): void => {\n  Message[theme] = (options: TdMessageProps | string) => {\n    let props: TdMessageProps = {\n      ...defaultProps,\n      theme,\n    };\n\n    if (typeof options === 'string') {\n      props.content = options;\n    } else {\n      props = { ...props, ...options };\n    }\n\n    create(props);\n  };\n});\n\nMessage.install = (app: App, name = '') => {\n  app.component(name || Message.name, Message);\n\n  // 添加插件入口\n  // eslint-disable-next-line no-param-reassign\n  app.config.globalProperties.$message = Message;\n};\n\ntype MessageApi = {\n  /** 展示普通消息 */\n  info: (options?: TdMessageProps | string) => void;\n  /** 展示成功消息 */\n  success: (options?: TdMessageProps | string) => void;\n  /** 展示警示消息 */\n  warning: (options?: TdMessageProps | string) => void;\n  /** 展示错误消息 */\n  error: (options?: TdMessageProps | string) => void;\n};\n\nexport const MessagePlugin: WithInstallType<typeof Message> & MessageApi = Message as any;\nexport default MessagePlugin;\n\ndeclare module '@vue/runtime-core' {\n  // Bind to `this` keyword\n  export interface ComponentCustomProperties {\n    $message: MessageApi;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}