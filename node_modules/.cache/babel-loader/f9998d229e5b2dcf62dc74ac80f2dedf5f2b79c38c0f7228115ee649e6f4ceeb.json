{"ast":null,"code":"/**\n * tdesign v0.14.1\n * (c) 2022 TDesign Group\n * @license MIT\n */\n\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { nextTick } from 'vue';\nimport { NOOP } from '../shared/functions.js';\nvar TransAniControl = /*#__PURE__*/function () {\n  function TransAniControl() {\n    _classCallCheck(this, TransAniControl);\n    _defineProperty(this, \"timeout\", void 0);\n    _defineProperty(this, \"finallyDo\", void 0);\n    this.timeout = null;\n    this.finallyDo = NOOP;\n  }\n  _createClass(TransAniControl, [{\n    key: \"setTo\",\n    value: function setTo(duration, nowDo, nextTickDo, finallyDo) {\n      var _this = this;\n      if (this.timeout) {\n        window.clearTimeout(this.timeout);\n        this.finallyDo();\n      }\n      nowDo();\n      nextTick(function () {\n        return window.setTimeout(nextTickDo, 0);\n      });\n      this.finallyDo = finallyDo;\n      this.timeout = window.setTimeout(function () {\n        _this.finallyDo();\n        _this.finallyDo = NOOP;\n        _this.timeout = 0;\n      }, duration);\n    }\n  }]);\n  return TransAniControl;\n}();\nexport { TransAniControl as default };","map":{"version":3,"mappings":";;;;;;;;;;;AACqB,IAGAA,eAAgB;EAKnC,SAAcA;IAAAC;IAAAC;IAAAA;IACZ,KAAKC,OAAU;IACf,KAAKC,SAAY;EACnB;EAAAC;IAAAC;IAAAC,KAEA,iBAAMC,UAAkBC,KAAuB,cAA4BL,SAAiC;MAAA;MAC1G,IAAI,KAAKD,OAAS;QACTO,oBAAa,KAAKP,OAAO;QAChC,KAAKC,SAAU;MACjB;MACMK;MACNE,SAAS;QAAA,OAAMD,OAAOE,UAAW,aAAY,CAAC,CAAC;OAAA;MAC/C,KAAKR,SAAY;MAEZ,eAAUM,MAAO,YAAW,YAAM;QACrCG,MAAKT,SAAU;QACfS,MAAKT,SAAY;QACjBS,MAAKV,OAAU;SACdK,QAAQ;IACb;EAAA;EAAA;AAAA","names":["TransAniControl","_classCallCheck","_defineProperty","timeout","finallyDo","_createClass","key","value","duration","nowDo","window","nextTick","setTimeout","_this"],"sources":["../../src/dropdown-menu/trans-ani-control.ts"],"sourcesContent":["import { nextTick } from 'vue';\nimport { NOOP } from '../shared/functions';\nimport { DropdownMenuDo } from './context';\n\nexport default class TransAniControl {\n  timeout: number | null;\n\n  finallyDo: DropdownMenuDo;\n\n  constructor() {\n    this.timeout = null;\n    this.finallyDo = NOOP;\n  }\n\n  setTo(duration: number, nowDo: DropdownMenuDo, nextTickDo: DropdownMenuDo, finallyDo: DropdownMenuDo): void {\n    if (this.timeout) {\n      window.clearTimeout(this.timeout);\n      this.finallyDo();\n    }\n    nowDo();\n    nextTick(() => window.setTimeout(nextTickDo, 0));\n    this.finallyDo = finallyDo;\n\n    this.timeout = window.setTimeout(() => {\n      this.finallyDo();\n      this.finallyDo = NOOP;\n      this.timeout = 0;\n    }, duration);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}