{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v0.14.1\n * (c) 2022 TDesign Group\n * @license MIT\n */\n\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { defineComponent, computed, ref, resolveComponent, openBlock, createBlock, mergeProps } from 'vue';\nimport config from '../config.js';\nimport PickerProps from './props.js';\nimport script$1 from './picker.js';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '@babel/runtime/helpers/slicedToArray';\nimport '../button/index.js';\nimport '../button/button.js';\nimport 'tdesign-icons-vue-next';\nimport '../shared/index.js';\nimport '../shared/functions.js';\nimport '../shared/util.js';\nimport '../shared/component.js';\nimport '../shared/constants.js';\nimport '../shared/render.js';\nimport '@babel/runtime/helpers/typeof';\nimport 'lodash/camelCase';\nimport '../shared/render-tnode.js';\nimport '../shared/useToggle/index.js';\nimport '../shared/useCountDown/index.js';\nimport '@babel/runtime/helpers/asyncToGenerator';\nimport '@babel/runtime/regenerator';\nimport '@vueuse/core';\nimport '../shared/useCountDown/utils.js';\nimport '../shared/useDefault/index.js';\nimport '../shared/useEmitEvent/index.js';\nimport '../shared/useChildSlots/index.js';\nimport '../shared/useVModel/index.js';\nimport '../shared/useTouch/index.js';\nimport '../shared/useScrollParent/index.js';\nimport '../shared/useExpose/index.js';\nimport '../shared/useTest/index.js';\nimport '../button/props.js';\nimport './style/css.js';\nimport '../button/type.js';\nimport './picker-item.js';\nimport './picker.class.js';\nimport '@babel/runtime/helpers/classCallCheck';\nimport '@babel/runtime/helpers/createClass';\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nvar prefix = config.prefix;\nvar name = \"\".concat(prefix, \"-cascade\");\nvar script = defineComponent({\n  name: name,\n  components: {\n    Picker: script$1\n  },\n  props: PickerProps,\n  setup: function setup(props, context) {\n    var pickerProps = computed(function () {\n      return _objectSpread({}, props);\n    });\n    var finalDepth = ref(1);\n    var finalSubOptionsRecord = ref({});\n    var generateCascadePickerColumns = function generateCascadePickerColumns(value, options, depth, subOptionsRecord) {\n      var columns = [];\n      columns.push(options.map(function (option) {\n        return {\n          label: option.label,\n          value: option.value\n        };\n      }));\n      for (var i = 0; i < depth - 1; i++) {\n        var x = value[i];\n        var subOptions = subOptionsRecord[x];\n        if (!subOptions) {\n          columns.push([]);\n        } else {\n          columns.push(subOptions.map(function (option) {\n            return {\n              label: option.label,\n              value: option.value\n            };\n          }));\n        }\n      }\n      return columns;\n    };\n    var initDepthAndRecord = function initDepthAndRecord(options) {\n      var depth = 1;\n      var subOptionsRecord = {};\n      function traverse(option, currentDepth) {\n        if (!option.children) {\n          return;\n        }\n        subOptionsRecord[option.value] = option.children;\n        var nextDepth = currentDepth + 1;\n        if (nextDepth > depth) {\n          depth = nextDepth;\n        }\n        option.children.forEach(function (option2) {\n          traverse(option2, nextDepth);\n        });\n      }\n      options.forEach(function (option) {\n        traverse(option, 1);\n      });\n      finalDepth.value = depth;\n      finalSubOptionsRecord.value = subOptionsRecord;\n    };\n    initDepthAndRecord(props.columns);\n    return {\n      name: name,\n      finalDepth: finalDepth,\n      finalSubOptionsRecord: finalSubOptionsRecord,\n      pickerProps: pickerProps,\n      generateCascadePickerColumns: generateCascadePickerColumns\n    };\n  }\n});\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_picker = resolveComponent(\"picker\");\n  return openBlock(), createBlock(_component_picker, mergeProps(_ctx.pickerProps, {\n    columns: function columns(selected) {\n      return _ctx.generateCascadePickerColumns(selected, _ctx.columns, _ctx.finalDepth, _ctx.finalSubOptionsRecord);\n    }\n  }), null, 16, [\"columns\"]);\n}\nscript.render = render;\nexport { script as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcA,IAAQA,SAAWC,OAAXD;AACR,IAAME,OAAUF;AAChB,aAAeG,eAAgB;EAC7BD;EACAE,YAAY;IAAEC,MAAO,EAAPA;GAAO;EACrBC,KAAO;EACPC,OAAMD,sBAAYE,OAAuB;IACvC,IAAMC,cAAcC,QAAS;MAAA,yBAAYJ;KAAQ;IAC3C,iBAAaK,IAAI,CAAC;IAClB,4BAAwBA,GAAI,GAAE;IACpC,IAAMC,4BAA+B,YAA/BA,4BAA+B,CACnCC,KACA,WACAC,OACAC,gBACG;MACH,IAAMC,UAA0B,EAAC;MACzBA,aACNC,QAAQC,GAAI,WAACC,MAAiB;QAAA;UAC5BC,OAAOD,MAAO;UACdN,OAAOM,MAAO;SACd;MAAA,GACJ;MACA,SAASE,CAAI,MAAGA,CAAI,WAAQ,GAAGA,CAAK;QAClC,IAAMC,IAAIT,KAAM;QAChB,IAAMU,aAAaR,gBAAiB;QACpC,IAAI,CAACQ,UAAY;UACPP,aAAK,EAAE;QACjB,CAAO;UACGA,aACNO,WAAWL,GAAI,WAACC,MAAiB;YAAA;cAC/BC,OAAOD,MAAO;cACdN,OAAOM,MAAO;aACd;UAAA,GACJ;QACF;MACF;MACO;KACT;IACM,yBAAqB,SAArBK,mBAAsBP,OAAiB;MAC3C,IAAIH,KAAQ;MACZ,IAAMC,mBAA0C,EAAC;MACxC,kBAASI,QAAaM,YAAsB;QAC/C,KAACN,OAAOO,QAAU;UACpB;QACF;QACiBX,wBAAOF,SAASM,MAAO;QACxC,IAAMQ,YAAYF,YAAe;QACjC,IAAIE,YAAYb,KAAO;UACbA;QACV;QACOK,gBAASS,OAAQ,WAACT,OAAgB;UACvCU,SAASV,SAAQQ,SAAS;QAC5B,CAAC;MACH;MACQV,gBAAQ,UAACE,MAAgB;QAC/BU,SAASV,QAAQ,CAAC;MACpB,CAAC;MACDW,WAAWjB,KAAQ;MACnBkB,sBAAsBlB,KAAQ;KAChC;IACAW,mBAAmBlB,MAAMU,OAAO;IACzB;MACLd;MACA4B;MACAC;MACAtB;MACAG;KACF;EACF;AACF,CAAC;;;oBCnFC,cAGCoB,iBAHD,aAGCC,KAFoBxB;IAClBO,SAAO,iBAAGkB;MAAA,OAAaD,IAA4B,8BAACC,QAAU,OAAOlB,OAAE,OAAUc,UAAE,OAAqBC;IAAA","names":["prefix","config","name","defineComponent","components","Picker","props","setup","context","pickerProps","computed","ref","generateCascadePickerColumns","value","depth","subOptionsRecord","columns","options","map","option","label","i","x","subOptions","initDepthAndRecord","currentDepth","children","nextDepth","forEach","traverse","finalDepth","finalSubOptionsRecord","_component_picker","_ctx","selected"],"sources":["../../src/picker/cascade.vue","../../src/picker/cascade.vue?vue&type=template&id=a3714af0&lang.js"],"sourcesContent":["<template>\n  <picker\n    v-bind=\"pickerProps\"\n    :columns=\"(selected) => generateCascadePickerColumns(selected, columns, finalDepth, finalSubOptionsRecord)\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, SetupContext, ref } from 'vue';\nimport config from '../config';\nimport PickerProps from './props';\nimport { PickerColumn, PickerValue } from './type';\nimport Picker from './picker.vue';\n\nconst { prefix } = config;\nconst name = `${prefix}-cascade`;\nexport default defineComponent({\n  name,\n  components: { Picker },\n  props: PickerProps,\n  setup(props: any, context: SetupContext) {\n    const pickerProps = computed(() => ({ ...props }));\n    const finalDepth = ref(1);\n    const finalSubOptionsRecord = ref({});\n    const generateCascadePickerColumns = (\n      value: PickerValue[],\n      options: any,\n      depth: number,\n      subOptionsRecord: Record<string, any>,\n    ) => {\n      const columns: PickerColumn[] = [];\n      columns.push(\n        options.map((option: any) => ({\n          label: option.label,\n          value: option.value,\n        })),\n      );\n      for (let i = 0; i < depth - 1; i++) {\n        const x = value[i];\n        const subOptions = subOptionsRecord[x];\n        if (!subOptions) {\n          columns.push([]);\n        } else {\n          columns.push(\n            subOptions.map((option: any) => ({\n              label: option.label,\n              value: option.value,\n            })),\n          );\n        }\n      }\n      return columns;\n    };\n    const initDepthAndRecord = (options: any) => {\n      let depth = 1;\n      const subOptionsRecord: Record<string, any[]> = {};\n      function traverse(option: any, currentDepth: number) {\n        if (!option.children) {\n          return;\n        }\n        subOptionsRecord[option.value] = option.children;\n        const nextDepth = currentDepth + 1;\n        if (nextDepth > depth) {\n          depth = nextDepth;\n        }\n        option.children.forEach((option: any) => {\n          traverse(option, nextDepth);\n        });\n      }\n      options.forEach((option: any) => {\n        traverse(option, 1);\n      });\n      finalDepth.value = depth;\n      finalSubOptionsRecord.value = subOptionsRecord;\n    };\n    initDepthAndRecord(props.columns);\n    return {\n      name,\n      finalDepth,\n      finalSubOptionsRecord,\n      pickerProps,\n      generateCascadePickerColumns,\n    };\n  },\n});\n</script>\n","<template>\n  <picker\n    v-bind=\"pickerProps\"\n    :columns=\"(selected) => generateCascadePickerColumns(selected, columns, finalDepth, finalSubOptionsRecord)\"\n  />\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, SetupContext, ref } from 'vue';\nimport config from '../config';\nimport PickerProps from './props';\nimport { PickerColumn, PickerValue } from './type';\nimport Picker from './picker.vue';\n\nconst { prefix } = config;\nconst name = `${prefix}-cascade`;\nexport default defineComponent({\n  name,\n  components: { Picker },\n  props: PickerProps,\n  setup(props: any, context: SetupContext) {\n    const pickerProps = computed(() => ({ ...props }));\n    const finalDepth = ref(1);\n    const finalSubOptionsRecord = ref({});\n    const generateCascadePickerColumns = (\n      value: PickerValue[],\n      options: any,\n      depth: number,\n      subOptionsRecord: Record<string, any>,\n    ) => {\n      const columns: PickerColumn[] = [];\n      columns.push(\n        options.map((option: any) => ({\n          label: option.label,\n          value: option.value,\n        })),\n      );\n      for (let i = 0; i < depth - 1; i++) {\n        const x = value[i];\n        const subOptions = subOptionsRecord[x];\n        if (!subOptions) {\n          columns.push([]);\n        } else {\n          columns.push(\n            subOptions.map((option: any) => ({\n              label: option.label,\n              value: option.value,\n            })),\n          );\n        }\n      }\n      return columns;\n    };\n    const initDepthAndRecord = (options: any) => {\n      let depth = 1;\n      const subOptionsRecord: Record<string, any[]> = {};\n      function traverse(option: any, currentDepth: number) {\n        if (!option.children) {\n          return;\n        }\n        subOptionsRecord[option.value] = option.children;\n        const nextDepth = currentDepth + 1;\n        if (nextDepth > depth) {\n          depth = nextDepth;\n        }\n        option.children.forEach((option: any) => {\n          traverse(option, nextDepth);\n        });\n      }\n      options.forEach((option: any) => {\n        traverse(option, 1);\n      });\n      finalDepth.value = depth;\n      finalSubOptionsRecord.value = subOptionsRecord;\n    };\n    initDepthAndRecord(props.columns);\n    return {\n      name,\n      finalDepth,\n      finalSubOptionsRecord,\n      pickerProps,\n      generateCascadePickerColumns,\n    };\n  },\n});\n</script>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}