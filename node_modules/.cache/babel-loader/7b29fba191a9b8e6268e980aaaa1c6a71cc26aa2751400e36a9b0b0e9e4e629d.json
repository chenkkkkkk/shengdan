{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/**\n * tdesign v0.14.1\n * (c) 2022 TDesign Group\n * @license MIT\n */\n\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport setStyle from '../utils/set-style.js';\nimport { getIEVersion } from '../utils/helper.js';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport '@babel/runtime/helpers/objectWithoutProperties';\nimport '@babel/runtime/helpers/slicedToArray';\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction circleAdapter(circleElem) {\n  var _window, _window$getComputedSt2, _window2, _window2$navigator;\n  var basicStyle = {};\n  if (!circleElem) {\n    return;\n  }\n  var _window$getComputedSt = (_window = window) === null || _window === void 0 ? void 0 : (_window$getComputedSt2 = _window.getComputedStyle) === null || _window$getComputedSt2 === void 0 ? void 0 : _window$getComputedSt2.call(_window, circleElem),\n    color = _window$getComputedSt.color,\n    fontSize = _window$getComputedSt.fontSize;\n  var ua = (_window2 = window) === null || _window2 === void 0 ? void 0 : (_window2$navigator = _window2.navigator) === null || _window2$navigator === void 0 ? void 0 : _window2$navigator.userAgent;\n  var isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);\n  var isIosWechat = /(?=.*iPhone)[?=.*MicroMessenger]/.test(ua) && !/Chrome/.test(ua);\n  var isMobile = /Mobile/.test(ua);\n  if ((isSafari || isIosWechat) && !isMobile) {\n    basicStyle = {\n      transformOrigin: \"-1px -1px\",\n      transform: \"scale(\".concat(parseInt(fontSize, 10) / 14, \")\")\n    };\n  }\n  if (color && getIEVersion() > 11) {\n    var matched = color.match(/[\\d.]+/g);\n    var endColor = matched ? \"rgba(\".concat(matched[0], \", \").concat(matched[1], \", \").concat(matched[2], \", 0)\") : \"\";\n    setStyle(circleElem, _objectSpread(_objectSpread({}, basicStyle), {}, {\n      background: \"conic-gradient(from 90deg at 50% 50%,\".concat(endColor, \" 0deg, \").concat(color, \" 360deg)\")\n    }));\n  } else {\n    setStyle(circleElem, _objectSpread(_objectSpread({}, basicStyle), {}, {\n      background: \"\"\n    }));\n  }\n}\nexport { circleAdapter as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAAwBA,cAAcC,UAAyB;EAAA;EAC7D,IAAIC,aAAa,EAAC;EAElB,IAAI,CAACD,UAAY;IACf;EACF;EAEA,uCAA4BE,oFAAQC,sBAAR,0FAA2BH,UAAU;IAAzDI,KAAO,yBAAPA,KAAO;IAAAC;EAIT,qBAAKH,kFAAQI,SAAW,uDAAnBC,mBAAmBC;EACxB,eAAW,SAASC,IAAK,GAAE,KAAK,CAAC,SAASA,KAAKC,EAAE;EAEjD,kBAAc,mCAAmCD,IAAK,GAAE,KAAK,CAAC,SAASA,KAAKC,EAAE;EAE9E,eAAW,QAAS,MAAKA,EAAE;EAC5B,iBAAYC,WAAgB,MAACC,QAAU;IAC7BX;MACXY,eAAiB;MACjBC,SAAW,kBAASC,QAAS,WAAU,EAAE,CAAI;KAC/C;EACF;EAEI,aAASC,YAAa,KAAI,EAAI;IAC1B,cAAUZ,KAAM,OAAM,SAAS;IAC/B,eAAWa,yBAAkBA,QAAQ,iBAAOA,OAAQ,KAAOA,qBAAQ,CAAW;IACpFC,SAASlB,UAAY,kCAChBC;MACHkB,2DAAoDC,QAAkB;KACvE;EACH,CAAO;IACLF,SAASlB,UAAY,kCAChBC;MACHkB,UAAY;KACb;EACH;AACF","names":["circleAdapter","circleElem","basicStyle","window","getComputedStyle","color","fontSize","navigator","_window2$navigator","userAgent","test","ua","isIosWechat","isMobile","transformOrigin","transform","parseInt","getIEVersion","matched","setStyle","background","endColor"],"sources":["../../../../src/_common/js/loading/circle-adapter.ts"],"sourcesContent":["import setStyle from '../utils/set-style';\nimport { getIEVersion } from '../utils/helper';\n\nexport default function circleAdapter(circleElem: HTMLElement) {\n  let basicStyle = {};\n\n  if (!circleElem) {\n    return;\n  }\n\n  const { color, fontSize } = window?.getComputedStyle?.(circleElem);\n\n  // to fix the browser compat of foreignObject in Safari,\n  // https://bugs.webkit.org/show_bug.cgi?id=23113\n  const ua = window?.navigator?.userAgent;\n  const isSafari = /Safari/.test(ua) && !/Chrome/.test(ua);\n  // 判断是否为 iOS 下的微信和企业微信\n  const isIosWechat = /(?=.*iPhone)[?=.*MicroMessenger]/.test(ua) && !/Chrome/.test(ua);\n  // 判断是否为 Mobile\n  const isMobile = /Mobile/.test(ua);\n  if ((isSafari || isIosWechat) && !isMobile) {\n    basicStyle = {\n      transformOrigin: '-1px -1px',\n      transform: `scale(${parseInt(fontSize, 10) / 14})`,\n    };\n  }\n  // 添加：判断是否为IE浏览器\n  if (color && getIEVersion() > 11) {\n    const matched = color.match(/[\\d.]+/g);\n    const endColor = matched ? `rgba(${matched[0]}, ${matched[1]}, ${matched[2]}, 0)` : '';\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: `conic-gradient(from 90deg at 50% 50%,${endColor} 0deg, ${color} 360deg)`,\n    });\n  } else {\n    setStyle(circleElem, {\n      ...basicStyle,\n      background: '',\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}